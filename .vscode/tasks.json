{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Rebuild Fabric",
            "dependsOn": "Start Minecraft Server Service" // run all below
        },
        {
            "label": "Compile Gradle",
            "type": "shell",
            "command": "gradle",
            "args": [
                "clean",
                "build"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [
                "$gradle"
            ]
        },
        {
            "label": "Stop Minecraft Server Service",
            "type": "shell",
            "windows": {
                "command": "nssm",
                "args": [
                    "stop",
                    "Minecraft Server"
                ],
                "options": {
                    "runas": "Administrator"
                }
            },
            "osx": {
                "command": "echo", // skip on mac
                "args": ["Stop Minecraft Server Service: N/A on mac"]
            },
            "dependsOn": "Compile Gradle"
        },
        {
            "label": "Copy JAR to Server",
            "type": "shell",
            "windows": {
                "command": "Copy-Item",
                "args": [
                    "-Path",
                    "'${workspaceFolder}/common/build/libs/dcintegration-common-MC1.21-3.1.0-SNAPSHOT-transformProductionFabric.jar'",
                    "-Destination",
                    "'D:/.minecraft/server/mods'",
                    "-Force"
                ],
                "options": {
                    "runas": "Administrator"
                }
            },
            "osx": {
                "command": "cp",
                "args": [
                    "-f",
                    "/Users/ehrrsn7/Code/Java/DiscordIntegration/fabric/build/libs/dcintegration-fabric-MC1.21-3.1.0-SNAPSHOT.jar",
                    "mods/"
                ],
                "options": {
                    "cwd": "/Users/ehrrsn7/Downloads/minecraft-server"
                },
            },
            "dependsOn": "Stop Minecraft Server Service"
        },
        {
            "label": "Run Minecraft Server",
            "type": "shell",
            "windows": {
                "command": "./start.bat",
                "options": {
                    "cwd": "D:/.minecraft/server"
                }
            },
            "osx": {
                // "command": "./start.sh",
                "command": "echo 'run server using: `cd /Users/ehrrsn7/Downloads/minecraft-server; ./start.sh'",
                "options": {
                    "cwd": "/Users/ehrrsn7/Downloads/minecraft-server"
                },
            },
            "dependsOn": "Copy JAR to Server"
        },
        {
            "label": "Start Minecraft Server Service",
            "type": "shell",
            "windows": {
                "command": "nssm",
                "args": [
                    "start",
                    "Minecraft Server"
                ],
                "options": {
                    "runas": "Administrator"
                }
            },
            "osx": {
                "command": "echo", // skip on mac
                "args": ["Start Minecraft Server Service: N/A on mac"]
            },
            "dependsOn": "Run Minecraft Server"
        }
    ]
}